<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>DtoRegistry.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">OpenHFT/Chronicle-Decentred</a> &gt; <a href="index.source.html" class="el_package">net.openhft.chronicle.decentred.util</a> &gt; <span class="el_source">DtoRegistry.java</span></div><h1>DtoRegistry.java</h1><pre class="source lang-java linenums">package net.openhft.chronicle.decentred.util;

import net.openhft.chronicle.decentred.dto.base.VanillaSignedMessage;

import java.util.function.Supplier;

/**
 * A holder of the different protocols that are available for all data transfer objects (dto:s) and
 * can supply new {@link DtoParser} objects.
 *
 * @param &lt;T&gt; the type of the super interface for all dto:s
 */
public interface DtoRegistry&lt;T&gt; extends Supplier&lt;DtoParser&lt;T&gt;&gt;, HasSuperInterface&lt;T&gt; {
    /**
     * Creates and returns a new {@link DtoRegistry}.
     * @param superInterface for all dto:s
     * @param &lt;T&gt; super interface type
     * @return a new {@link DtoRegistry}
     */
    static &lt;T&gt; DtoRegistry&lt;T&gt; newRegistry(Class&lt;T&gt; superInterface) {
<span class="fc" id="L21">        return new VanillaDtoRegistry&lt;&gt;(superInterface);</span>
    }

    static &lt;T&gt; DtoRegistry&lt;T&gt; newRegistry(int protocol, Class&lt;T&gt; superInterface) {
<span class="nc" id="L25">        return new VanillaDtoRegistry&lt;&gt;(superInterface).addProtocol(protocol, superInterface);</span>
    }

    /**
     * Adds a new protocol for this registry with the provided protocol
     * number {@code protocol} and provided protocol class {@code pClass}.
     * &lt;p&gt;
     * The given {@code protocol} will be associated with the given {@code pClass}.
     * &lt;p&gt;
     * The provided {@code pClass} objects must contain at least one method
     * annotated with the {@link net.openhft.chronicle.bytes.MethodId} annotation
     * or this method will have no effect.
     *
     * @param protocol number to use
     * @param pClass protocol class to be associated
     * @return this (potentially modified) DtoRegistry
     *
     * @throws IllegalArgumentException if the provided {@code protocol} is negative or
     * if the protocol otherwise cannot be added to this registry.
     * @throws NullPointerException if the provided {@code pClass} is {@code null}
     */
    DtoRegistry&lt;T&gt; addProtocol(int protocol, Class&lt;? super T&gt; pClass);

    /**
     * Returns the protocol number for the provided message parameter {@code clazz}.
     *
     * @param clazz of the method parameter to use for retrieval.
     * @return the protocol number for the provided message parameter {@code clazz}
     *
     * @throws NullPointerException if the provided {@code clazz} is {@code null}
     */
    int protocolFor(Class clazz);

    /**
     * Returns the message type which is the {@link net.openhft.chronicle.bytes.MethodId}
     * value for the provided message parameter {@code clazz}.
     *
     * @param clazz of the method parameter to use for retrieval.
     * @return the message type which is the {@link net.openhft.chronicle.bytes.MethodId}
     *         value for the provided message parameter {@code clazz}
     *
     * @throws NullPointerException if the provided {@code clazz} is {@code null}
     */
    int messageTypeFor(Class clazz);
    /**
     * Returns the combined protocol number and message type
     * (i.e. {@link net.openhft.chronicle.bytes.MethodId} value) for the provided
     * message parameter {@code clazz}.
     *
     * @param clazz of the method parameter to use for retrieval.
     * @return the combined protocol number and message type
     *         (i.e. {@link net.openhft.chronicle.bytes.MethodId} value) for the provided
     *         message parameter {@code clazz}
     *
     * @throws NullPointerException if the provided {@code clazz} is {@code null}
     */
    int protocolMessageTypeFor(Class clazz);

    /**
     * Creates and returns a new DtoParser.
     *
     * @return a new DtoParser
     */
    @Override
    DtoParser&lt;T&gt; get();

    &lt;K&gt; DtoParser&lt;K&gt; get(Class&lt;K&gt; token);

    /**
     * Creates and returns a new VanillaSignedMessage of the provided {@code tClass} type.
     *
     * @param tClass to use when creating a new message
     * @param &lt;M&gt;    Message type
     * @return       a new VanillaSignedMessage of the provided {@code tClass} type
     *
     * @throws NullPointerException if the provided {@code tClass } is {@code null}
     */
    &lt;M extends VanillaSignedMessage&lt;M&gt;&gt; M create(Class&lt;M&gt; tClass);

}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.3.201901230119</span></div></body></html>